

<!DOCTYPE html>
<html class="writer-html5" lang="dk" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Præsentation af FIRE &mdash; FIRE 0.3.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Generelle kommandokald i linjen" href="kald.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> FIRE
          

          
          </a>

          
            
            
              <div class="version">
                0.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installationsvejledning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datamodel.html">FIREs Datamodel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../for_udviklere.html">Udviklingsguide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">Kommandolinjeprogrammer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Workshop</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Indledning</a></li>
<li class="toctree-l2"><a class="reference internal" href="kald.html">Generelle kommandokald i linjen</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Præsentation af FIRE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fire-info">fire info</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ovelse">Øvelse</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fire-niv">fire niv</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#step-1-opret-sag">Step 1) opret-sag</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-2-udtraek-revision">Step 2) udtræk-revision</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-3-ilaeg-revision">Step 3) ilæg-revision</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-4-ilaeg-nye-punkter">Step 4) ilæg-nye-punkter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-5-laes-observationer">Step 5) læs-observationer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-6-regn">Step 6) regn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-7-ilaeg-observationer">Step 7) ilæg-observationer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-8-ilaeg-nye-koter">Step 8) ilæg-nye-koter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-9-luk-sag">Step 9) luk-sag</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#visualisering-i-qgis">Visualisering i QGIS</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">FIRE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Workshop</a> &raquo;</li>
        
      <li>Præsentation af FIRE</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/workshop/workshop.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="praesentation-af-fire">
<span id="workshop"></span><h1>Præsentation af FIRE<a class="headerlink" href="#praesentation-af-fire" title="Permalink to this headline">¶</a></h1>
<p>FIRE indeholder alt den relevante information, som refgeo gør. Der er punktnumre,
identer, skitser, koordinater, tidsserier, beskrivelse, afmærkningstyper osv. osv.
Strukturen er dog en helt anden og meget mere overskuelig og vedligeholdelsesvenlig
nede i maven på databasen, hvilket gør FIRE til en markant forbedring af et af
vores vigtigste dataarkiver.</p>
<p>Dog er alt vores nuværende udjævnings- og datahåndteringssoftware (fx. ADJ,
<code class="docutils literal notranslate"><span class="pre">valde</span></code> og <code class="docutils literal notranslate"><span class="pre">vedl.pl</span></code>) tilpasset refgeo og det famøse KSM-format, hvilket ikke kan
bruges i det nye setup.
Derfor har vi udviklet adskillige kommandolinjekald, som har til formål at lade
brugeren se ned i databasen, udtrække det data der er relevant, putte ny data
ned i databasen osv.
Det er en løbende opgave, hvor der bliver udviklet den funktionalitet, som viser
sig nødvendig og brugbar til et gentagent formål.</p>
<p>Hvis nogen havde håbet på en lækkert designet brugergrænseflade med søgebokse og
kasser, der kan hakkes af og en knap med <em>beregn</em> til til at lave en udjævning,
som derefter bliver vist i QGIS, så må vi skuffe.
Det er ikke der vi er; vi er slet ikke nok folk til at kunne retfærdiggøre at
bruge tid og penge på at udvikle sådan noget, og desuden vil det være et hejs at
vedligeholde og videreudvikle kode til, hvilket vi helst vil gøre selv.
Derfor er det altså stadig kommandolinjekald, som er vejen frem! Men dermed bliver
overgangen til ny database og beregningssoftware nok ikke så slem alligevel.</p>
<p>Nedenfor uddybes de funktionaliteter vi på nuværende tidspunkt har udviklet. Det er
alle underprogrammer (og under-underprogrammer) under <code class="docutils literal notranslate"><span class="pre">fire</span></code> og køres derfor ved
først at kalde <code class="docutils literal notranslate"><span class="pre">fire</span></code> efterfulgt af underkommandoens navn.</p>
<div class="section" id="fire-info">
<h2>fire info<a class="headerlink" href="#fire-info" title="Permalink to this headline">¶</a></h2>
<p>En grundliggende funktionalitet er at kunne se hvilken data, der ligger i databasen,
altså hvilken info man har i arkivet. Til det er der udviklet et kommandolinjeprogram
kaldet <code class="docutils literal notranslate"><span class="pre">fire</span> <span class="pre">info</span></code>. Man kan se hvad programmet indeholder ved at taste</p>
<blockquote>
<div><p>&gt; fire info --help</p>
</div></blockquote>
<p>Herfra ses fem forskellige kommandoer man kan bruge:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">infotype</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obstype</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">punkt</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sag</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">srid</span></code></p></li>
</ul>
<p>Hvis man ønsker at fremsøge et punkt og se hvilke oplysninger, der knytter sig
til det (som man før kunne med <code class="docutils literal notranslate"><span class="pre">valde</span></code>, eller Valdemar i tjenesten), kan man
fx taste:</p>
<blockquote>
<div><p>&gt; fire info punkt gi2010</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Det er ligegyldet om der skrives med stort eller småt eller om der
benyttes punktummer eller ej i argumentet. Dog skal der være bindestreg
mellem herred, sogn og løbenummer.</p>
</div>
<p>I udtrækket plottes diverse oplysninger om punktet direkte på skærmen, som set
på billedet:</p>
<a class="reference internal image-reference" href="../_images/fireinfopunkt.PNG"><img alt="Udtræk fra databasen for punkt G.I.2010" src="../_images/fireinfopunkt.PNG" style="width: 800px;" /></a>
<p>Udtrækket viser den formodede relevante information, der ligger på punktet fra
attribut-tabellerne og fra koordinattabellerne.
I eksemplet ses det fx, at punktet</p>
<ul class="simple">
<li><p>er oprettet i databasen 19/3 1985,</p></li>
<li><p>også hedder K-11-09263,</p></li>
<li><p>i øvrigt er et jessenpunkt til en tidsserie,</p></li>
<li><p>har en DVR90-kote fra 3. præc. indikeret ved EPSG-kode 5799 og beregningstidspunkt
11/2-2000 kl. 13:30),</p></li>
<li><p>har en plankoordinat fra 2011 (med EPSG-koden 4258) og to andre
koordinater i andre net.
<strong>Stjerne (eller farven grøn) indikerer at koordinaten er den gældende for det pågældende net.</strong></p></li>
</ul>
<p>På samme måde kan andre elementer slås op i databasen, bl.a. oplysninger om historiske
koter med parameteren <em>-K</em>, observationer med parameteren <em>-O</em> og andre detaljer med
parameteren <em>-D</em>.</p>
<div class="section" id="ovelse">
<h3>Øvelse<a class="headerlink" href="#ovelse" title="Permalink to this headline">¶</a></h3>
<p>Prøv selv at fremsøge mere info, fx:</p>
<ol class="arabic simple">
<li><p>alle observationer fra et givent punkt</p></li>
<li><p>alle historiske koordinater for et punkt</p></li>
<li><p>tekstbeskrivelsen på attributten AFM:2701</p></li>
<li><p>alle aktive sager i databasen</p></li>
</ol>
</div>
</div>
<div class="section" id="fire-niv">
<h2>fire niv<a class="headerlink" href="#fire-niv" title="Permalink to this headline">¶</a></h2>
<p>Der er blevet udviklet et kommandolinjeprogram til udjævningsberegning kaldet <code class="docutils literal notranslate"><span class="pre">niv</span></code>.
Læs om hvordan programmet kaldes <a class="reference internal" href="../apps/niv.html#kommandolinjeprogrammer-niv"><span class="std std-ref">her</span></a></p>
<p>Fra dette kald kan hele produktionslinjen køres; fra dataudtræk, revision, beregning,
til ilægning af resultat og generering af afsluttende rapport til kunde. Se mere ved
at køre kaldet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">fire</span> <span class="n">niv</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>Alt datahåndtering foregår på Windows og i Excelregneark med diverse faneblade.
Vi vil nedenfor gennemgå processen.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sørg for at bruge små bogstaver. Kald og parametre genkendes ikke med versaler.
Undtagelsen er ved punktnumre; her kan både store og små bogstaver benyttes.</p>
</div>
<div class="section" id="step-1-opret-sag">
<h3>Step 1) opret-sag<a class="headerlink" href="#step-1-opret-sag" title="Permalink to this headline">¶</a></h3>
<p>I <code class="docutils literal notranslate"><span class="pre">fire</span></code> har vi valgt at knytte al beregning og fikspunkthåndtering op på såkaldte
<em>sagsevents</em>. Det vil sige at når man går igang med et nyt projekt, fx. en opgave
omhandlende opmåling og beregning af lokal vandstand i Havnebyen, så opretter man
en sag til denne opgave, hvori alt ens dataudtræk, observationer, beregninger og
endelige resultater bliver registreret på. Kaldet, der skal køres under <code class="docutils literal notranslate"><span class="pre">fire</span> <span class="pre">niv</span></code>
for at oprette en ny sag, hedder, passende nok, <code class="docutils literal notranslate"><span class="pre">opret-sag</span></code>. Lad os prøve at få
mere hjælp:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">fire</span> <span class="n">niv</span> <span class="n">opret</span><span class="o">-</span><span class="n">sag</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>Her kommer en beskrivelse af hvad der forventes af input:</p>
<ul class="simple">
<li><p>Options: Valgfrit. Valgmuligheder ses i hjælpeteksten.</p></li>
<li><p>Projektnavn: Obligatorisk. Kan fx være <em>Fjernkontrol_af_SULD</em>. Dette bliver navnet
på dit regneark.</p></li>
<li><p>Sagsbehandler: Obligatorisk. Skal altid være opretters B-NUMMER (af GDPR-årsager).</p></li>
<li><p>Beskrivelse: Valgfrit, men en god idé at beskrive nærmere hvad sagen indeholder,
fx &quot;Nivellement af skruepløkke samt lodrette bolte ved SULD samt fjernkontrol til
5D-punktet GRAV. Antenne IKKE opført.&quot;</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Hvis input består af flere ord, fx i projektnavn eller beskrivelse, skal
disse indkaples i citationstegn (&quot; &quot;). Det anbefales dog IKKE at lave mellemrum
i projektnavne.</p>
</div>
<p>I terminalen vil det se ud som dette, når der oprettes en sag:</p>
<a class="reference internal image-reference" href="../_images/firenivopretsag.PNG"><img alt="Opret sag, step 1" src="../_images/firenivopretsag.PNG" style="width: 800px;" /></a>
<p>Det ses, at der kommer en advarsel op. Da alt hvad der oprettes i databasen ikke
kan slettes, er det en god idé at dobbelttjekke alt info man skriver til databasen.
Hvis man er sikker på sit input, kan man svare <em>&quot;ja&quot;</em> til spørgsmålet. Hvis der svares
alt andet, vil der ikke blive oprettet en sag i databasen.</p>
<a class="reference internal image-reference" href="../_images/firenivopretsag2.PNG"><img alt="Opret sag, step 2" src="../_images/firenivopretsag2.PNG" style="width: 800px;" /></a>
<p>Skrives der alt andet end <em>&quot;ja&quot;</em>, får man valget om der alligevel skal oprettes
sagsregneark (også kaldet projektfil). Hertil kan der svares <em>&quot;ja&quot;</em>, og et excel-ark
med filnavn som projektnavn oprettes i den mappe man kører kaldet i.</p>
<a class="reference internal image-reference" href="../_images/firenivopretsag3.PNG"><img alt="Opret sag, step 3" src="../_images/firenivopretsag3.PNG" style="width: 800px;" /></a>
<p>Excel-arket åbnes, og der ses seks faneblade:</p>
<ul class="simple">
<li><p>Projektside: Her kan man løbende indtaste relevant info for projektet.</p></li>
<li><p>Sagsgang: Her vil sagens hændelser fremgå, efterhånden som de forekommer.</p></li>
<li><p>Nyetablerede punkter: Her kan man indtaste de nye punkter, som er oprettet til
projektet.</p></li>
<li><p>Notater</p></li>
<li><p>Filoversigt: Her kan man indtaste filnavnene på opmålingsfilerne. husk at definere
stien, hvis ikke filen ligger samme sted som projektfilen.</p></li>
<li><p>Parametre</p></li>
</ul>
<p>Hvert faneblad kan nu redigeres til det formål man ønsker.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Når man laver sit kommandokald, skal man sikre sig der ikke eksisterer et
projekt med det navn allerede, ellers vil <code class="docutils literal notranslate"><span class="pre">fire</span></code> brokke sig. <code class="docutils literal notranslate"><span class="pre">fire</span></code> kan ligeledes
ikke skrive til et allerede åbent excel-ark.</p>
</div>
<p>Ang. nyetablerede punkter:
Hertil findes et faneblad, som skal udfyldes med mindst tre oplysninger:</p>
<ol class="arabic simple">
<li><p>Et foreløbigt navn</p></li>
<li><p>En længdegrad/Y, Nord (UTM eller grader)</p></li>
<li><p>En breddegrad/X, Øst (UTM eller grader)</p></li>
</ol>
<p>De resterende kolonner må meget gerne også fyldes ud, men den videre proces er ikke
afhængig af dem. Det man ikke kan udfylde, er <em>Landsnummer</em> og <em>uuid</em>, da det først
genereres det øjeblik punktet ilægges databasen nede i <a class="reference internal" href="#step4"><span class="std std-ref">step 4)</span></a>.</p>
<a class="reference internal image-reference" href="../_images/firenivopretsag4.PNG"><img alt="Opret nye punkter, excel-visning" src="../_images/firenivopretsag4.PNG" style="width: 800px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Koordinater kan skrives både med UTM-format og med gradetal. <code class="docutils literal notranslate"><span class="pre">fire</span></code> genkender
selv formatet og transformerer til geografiske koordinater, som er standard i <code class="docutils literal notranslate"><span class="pre">fire</span></code>.</p>
</div>
</div>
<div class="section" id="step-2-udtraek-revision">
<h3>Step 2) udtræk-revision<a class="headerlink" href="#step-2-udtraek-revision" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Steppet her kan springes over, såfremt man kun skal lave en beregning.</p>
</div>
<p>Når vi er ude at tilse punkter, fx ifm. den kommunale punktrevision, kontrolleres det
at punktets attributter (beskrivelse, lokation, bolttype osv.) er korrekt; hvis ikke
skal de rettes til.
Til det formål kan man kalde en kommando, der hedder <code class="docutils literal notranslate"><span class="pre">udtræk-revision</span></code> under
<code class="docutils literal notranslate"><span class="pre">fire</span> <span class="pre">niv</span></code>:</p>
<blockquote>
<div><p>&gt; fire niv udtræk-revision --help</p>
</div></blockquote>
<p>Det ses man skal definere to parametre:</p>
<ul class="simple">
<li><p>Projektnavn: Som defineret i <code class="docutils literal notranslate"><span class="pre">opret-sag</span></code>. Indkapslet i &quot; &quot;</p></li>
<li><p>Distriks- eller punktnavn(e): Her kan man fx. skrive 61-07 61-03 63-10 SULD</p></li>
</ul>
<p>I terminalen vil det se ud som følger:</p>
<a class="reference internal image-reference" href="../_images/firenivudtrækrevision.PNG"><img alt="Udtræk data til punktrevision" src="../_images/firenivudtrækrevision.PNG" style="width: 800px;" /></a>
<p>hvorefter punkterne udtrækkes og lægges i en ny excel-fil navngivet med
&quot;projektnavn&quot;-revision.xlsx. Format er som vist nedenfor:</p>
<a class="reference internal image-reference" href="../_images/firenivudtrækrevision2.PNG"><img alt="Udtræk data til punktrevision, excelvisning" src="../_images/firenivudtrækrevision2.PNG" style="width: 800px;" /></a>
<p>I dette ark kan man nu rette attributterne til efter behov. Nedenfor er vist:</p>
<ol class="arabic simple">
<li><p>rettelser for punkt K-63-09930 i attributterne <em>ATTR:beskrivelse</em> og
<em>AFM:højde_over_terræn</em></p></li>
<li><p>ændring i lokationskoordinaten (<em>OVERVEJ:lokation</em>)</p></li>
<li><p>tilføjelse af og om punktet kunne være muligt datumstabilt
(<em>OVERVEJ:muligt_datumstabil</em>), at punktet nu er et restricted punkt
(<em>ATTR:restricted</em>) og dens GNSS-egnetheden (<em>ATTR:gnss_egnet</em>)</p></li>
<li><p>at punktet er besøgt ved at fjerne kryds i kolonnen <em>Ikke besøgt</em></p></li>
</ol>
<a class="reference internal image-reference" href="../_images/firenivudtrækrevision3.PNG"><img alt="Udtræk data til punktrevision, excelvisning" src="../_images/firenivudtrækrevision3.PNG" style="width: 800px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Attributter MED id indikerer at oplysningen er gemt og udtrukket fra
databasen. Attributter UDEN id er endnu ikke oprettet i databasen.</p>
</div>
<p>Ved revision af mange punkter, er der oprettet en overblikskolonne, <em>Ikke besøgt</em>.
Denne er født med et kryds ud for punktbeskrivelsen, da man derved kan tilføje excels
filterfunktion, og filtrere de rækker væk uden et kryds. Pas på med ikke at <em>sortere</em>,
da rækkerne så vil blive blandet. Efter filtrering kan man let se hvilke punkter man
endnu ikke har været forbi... såfremt man husker at slette krydset fra de punkter man
allerede HAR besøgt.</p>
</div>
<div class="section" id="step-3-ilaeg-revision">
<h3>Step 3) ilæg-revision<a class="headerlink" href="#step-3-ilaeg-revision" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Steppet her kan springes over, såfremt man kun skal lave en beregning.</p>
</div>
<p><em>ENDNU IKKE FÆRDIGIMPLEMENTERET</em></p>
<blockquote>
<div><p>&gt; fire niv ilæg-revision --help</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/firenivilægrevision.PNG"><img alt="Ilæg data fra punktrevision" src="../_images/firenivilægrevision.PNG" style="width: 800px;" /></a>
<p><em>Der findes dog pt. en testfunktion (parameteren</em> --test <em>), som kan vise dig hvor der er registreret nye
attributter på punkterne, men som ikke lægger noget i databasen.</em></p>
<a class="reference internal image-reference" href="../_images/firenivilægrevision2.PNG"><img alt="Ilæg data fra punktrevision" src="../_images/firenivilægrevision2.PNG" style="width: 800px;" /></a>
</div>
<div class="section" id="step-4-ilaeg-nye-punkter">
<span id="step4"></span><h3>Step 4) ilæg-nye-punkter<a class="headerlink" href="#step-4-ilaeg-nye-punkter" title="Permalink to this headline">¶</a></h3>
<p><em>ENDNU IKKE FÆRDIGIMPLEMENTERET</em></p>
<blockquote>
<div><p>&gt; fire niv ilæg-nye-punkter --help</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/firenivilægpunkt.PNG"><img alt="Ilæg nye punkter" src="../_images/firenivilægpunkt.PNG" style="width: 800px;" /></a>
</div>
<div class="section" id="step-5-laes-observationer">
<span id="step5"></span><h3>Step 5) læs-observationer<a class="headerlink" href="#step-5-laes-observationer" title="Permalink to this headline">¶</a></h3>
<p>Når man har lavet sin opmåling færdig, ender man med en råfil eller mere, som skal
beregnes. Disse filnavne (og tilhørende sti) skal tastes ind i excel-arket under
fanen <em>Filoversigt</em> med en opmålingstype (mgl eller mtl), en apriori-spredning (sigma)
og centreringsfejl(delta).</p>
<p>Herefter <strong>GEMMES EXCEL-ARKET</strong> og man vender tilbage til terminalen for
at lave kaldet <code class="docutils literal notranslate"><span class="pre">læs-observationer</span></code> (man behøver ikke at lukke sin projektfil,
da der ikke skrives til denne i kaldet, men blot læses herfra). Lad os se hvilke
parametre det har brug for:</p>
<blockquote>
<div><p>&gt; fire niv læs-observationer --help.</p>
</div></blockquote>
<p>Her vises at den obligatoriske parameter er <em>Projektnavn</em>, hvilket i vores eksempel
vil se således ud:</p>
<a class="reference internal image-reference" href="../_images/firenivlæsobservationer.PNG"><img alt="Netopbygning ud fra inputfiler" src="../_images/firenivlæsobservationer.PNG" style="width: 800px;" /></a>
<a class="reference internal image-reference" href="../_images/firenivlæsobservationer2.PNG"><img alt="Netopbygning ud fra inputfiler - bund" src="../_images/firenivlæsobservationer2.PNG" style="width: 800px;" /></a>
<p>Efter kaldet er færdigkørt, vil der være dannet tre nye filer;</p>
<ul class="simple">
<li><p>en <em>projektnavn</em>-resultat.xlsx</p></li>
<li><p>en <em>projektnavn</em>-observationer.geojson samt</p></li>
<li><p>en <em>projektnavn</em>-punkter.geojson</p></li>
</ul>
<p>De to .geojson-filer er til indlæsning i QGIS til visualisering af nettet. Se
<a class="reference internal" href="#visualiseringqgis"><span class="std std-ref">her</span></a> for mere.</p>
<p>Når resultatfilen åbnes, ses to faneblade; et med observationerne og et med en
punktoversigt:</p>
<a class="reference internal image-reference" href="../_images/firenivlæsobservationer3.PNG"><img alt="Netopbygning ud fra inputfiler - observationsliste" src="../_images/firenivlæsobservationer3.PNG" style="width: 800px;" /></a>
<p>Bemærk kolonnen <em>Sluk</em>, som indikerer en mulighed for at udelade enkelte observationer
i den videre beregning.</p>
<a class="reference internal image-reference" href="../_images/firenivlæsobservationer4.PNG"><img alt="Netopbygning ud fra inputfiler - punktoversigt" src="../_images/firenivlæsobservationer4.PNG" style="width: 800px;" /></a>
<p>Bemærk også at nyetablerede punkter fra faneblad i projektfil fremgår med <em>År</em> lig 1800,
<em>Kote</em> lig 0 og <em>Middelfejl</em> lig 1000000. I tilfældet her er et punkt etableret, men
findes ikke i observationsfilen (Hjortholmvej 19), og det fremgår så også uden
yderligere information.</p>
<p>Slutteligt står der i terminalen hvad man skal gøre som det næste: <em>Kopiér nu
faneblade fra 'Projektnavn-resultat.xlsx' til 'Projektsnavn.xlsx', og vælg
fastholdte punkter i punktoversigten.</em> Så det gør vi!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For at flytte eller kopiere et faneblad til en anden excel-fil:
Åbn filen du ønsker at flytte faner til. Højreklik på fanebladet der skal
flyttes, vælg <em>Flyt eller kopier</em>, og udvælg hvor du vil have arket flyttet hen.</p>
</div>
</div>
<div class="section" id="step-6-regn">
<h3>Step 6) regn<a class="headerlink" href="#step-6-regn" title="Permalink to this headline">¶</a></h3>
<p>Vi skal nu til at beregne nye koter til de observerede punkter.</p>
<p>I ens projektfil kan man notere hvilke punkter skal fastholdes, ved at, i fanebladet
<em>Punktoversigt</em>, skrive <em>x</em> ud for punktet i <em>Fasthold</em>-kolonnen. Gem derefter filen
og vend tilbage til terminalen, hvor kaldet <code class="docutils literal notranslate"><span class="pre">regn</span></code> skal køres:</p>
<blockquote>
<div><p>&gt; fire niv regn --help</p>
</div></blockquote>
<p>Herfra ses at man igen skal bruge <em>Projektnavn</em> som parameter, og har to valgmuligheder
også; en kontrolberegning (1 punkt fastholdt) eller en endelig beregning. Hvis ingen tilvalg
sættes, gætter scriptet selv på hvilken type beregning vi har, ud fra antal af fastholdte
punkter. I terminalen vil det se således ud:</p>
<a class="reference internal image-reference" href="../_images/firenivadj.PNG"><img alt="Beregn nye koter" src="../_images/firenivadj.PNG" style="width: 800px;" /></a>
<p>Det ses at der er valgt to punkter som fastholdt (G.I.1832 og G.I.1833), og et enkelt
punkt er ikke med i nivellementslinjen (Hjortholmvej 19).</p>
<p>Der er også genereret flere resultatfiler, bl.a.</p>
<ul class="simple">
<li><p>en <em>projektnavn</em>-resultat.xlsx (eller nye faner i eksisterende fil)</p></li>
<li><p>en <em>projektnavn</em>-resultat.xml (til intern brug for <code class="docutils literal notranslate"><span class="pre">fire</span></code>)</p></li>
<li><p>en <em>projektnavn</em>-resultat.html</p></li>
</ul>
<p>I .html-filen findes diverse statistik over udjævningsberegningen, som det underliggende
kode (GnuGama) genererer. Filen åbnes også default efter kørslen.</p>
<p>I resultatfilen er der nu tre faner;</p>
<ul class="simple">
<li><p><em>Netgeometri</em>,</p></li>
<li><p><em>Singulære</em> og</p></li>
<li><p><em>Kontrolberegning</em></p></li>
</ul>
<p>Netgeometrien viser hvilke punkter er naboer til hvilke punkter, og man kan herfra
se om der er blinde linjer (punkter med kun én nabo). Singulære punkter er punkter, som
ikke er forbundet med de(t) fastholdte punkt(er), og der derfor ikke kan beregnes en kote
til.</p>
<p>Kontrolberegningen viser det egentlige beregningsresultat. Kolonner er nu fyldt ud med
nyberegnede koter, middelfejl og differencen fra gældende kote, og man kan lave sin
endelige vurdering af beregningen.</p>
<p>Fanebladet <em>Kontrolberegning</em> flyttes nu over i projektfilen på samme måde som før, og i
<em>Punktoversigt</em>-fanen kan man nu udvælge de fastholdte punkter til den endelige beregning.
Derefter køres <code class="docutils literal notranslate"><span class="pre">regn</span></code> igen (husk at lukke resultatfilen), og en ny beregning udføres;
denne gang vil det resulterende faneblad hedde <em>Endelig beregning</em>, som også kan flyttes
over i projektfilen, såfremt man er tilfreds med beregningsresultatet.</p>
</div>
<div class="section" id="step-7-ilaeg-observationer">
<h3>Step 7) ilæg-observationer<a class="headerlink" href="#step-7-ilaeg-observationer" title="Permalink to this headline">¶</a></h3>
<p><em>ENDNU IKKE FÆRDIGIMPLEMENTERET</em></p>
<blockquote>
<div><p>&gt; fire niv ilæg-observationer --help</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/firenivilægobs.PNG"><img alt="Ilæg observationer i database" src="../_images/firenivilægobs.PNG" style="width: 800px;" /></a>
</div>
<div class="section" id="step-8-ilaeg-nye-koter">
<h3>Step 8) ilæg-nye-koter<a class="headerlink" href="#step-8-ilaeg-nye-koter" title="Permalink to this headline">¶</a></h3>
<p><em>ENDNU IKKE FÆRDIGIMPLEMENTERET</em></p>
<blockquote>
<div><p>&gt; fire niv ilæg-nye-koter --help</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/firenivilægkoter.PNG"><img alt="Ilæg nye koter i database" src="../_images/firenivilægkoter.PNG" style="width: 800px;" /></a>
<p>Punktoversigten fra resultatarket indeholder den info, som skal lægges i databasen:
Koter, middelfejl osv. Hvis der er punkter, som man ikke ønsker skal have ny kote,
kan man sætte <em>x</em> i kolonnen <em>Udelad publikation</em>, som vist nedenfor:</p>
<a class="reference internal image-reference" href="../_images/firenivilægkoter2.PNG"><img alt="Ilæg nye koter i database" src="../_images/firenivilægkoter2.PNG" style="width: 800px;" /></a>
<p>På den måde fremgår punktet stadig i projektfilen og det er tydeligt at punktet
er valgt fra ved koteopdateringen.</p>
</div>
<div class="section" id="step-9-luk-sag">
<h3>Step 9) luk-sag<a class="headerlink" href="#step-9-luk-sag" title="Permalink to this headline">¶</a></h3>
<p><em>ENDNU IKKE FÆRDIGIMPLEMENTERET</em></p>
</div>
</div>
</div>
<div class="section" id="visualisering-i-qgis">
<span id="visualiseringqgis"></span><h1>Visualisering i QGIS<a class="headerlink" href="#visualisering-i-qgis" title="Permalink to this headline">¶</a></h1>
<p>For at få en grafisk visning af sit opmålte net, bruges QGIS. Man kan åbne QGIS enten
via startmenuen i Windows eller ved at taste</p>
<blockquote>
<div><p>&gt; qgis</p>
</div></blockquote>
<p>i sin terminal (såfremt det miljø man arbejder i har QGIS tilknyttet).</p>
<p>I <a class="reference internal" href="#step5"><span class="std std-ref">step 5)</span></a> blev der genereret to .geojson-filer, en punktfil og en
observationslinjefil. Disse to kan direkte indlæses i QGIS, fx vha. <em>drag-and-drop</em>.
Nedenfor ses hvordan nettet i eksemplet ovenfor ser ud. Der er en række punkter
der er målt imellem, samt et singulært punkt; det nyetablerede ved Hjortholmvej 19.</p>
<a class="reference internal image-reference" href="../_images/QGIS.PNG"><img alt="Netopbygning vist i QGIS" src="../_images/QGIS.PNG" style="width: 800px;" /></a>
<p>Der er blevet udviklet et plugin til QGIS, der hedder <code class="docutils literal notranslate"><span class="pre">flame</span></code>. Med dette bør det
være muligt let at få vist punkter fra databasen i et brugbart regi. Fx kan man fremsøge
alle punkter inden for en given kommune, et givent distrikt osv.</p>
<p>Pluginet er endnu ikke færdigudviklet og testet af, derfor afventer en nærmere gennemgang
af det. Men der bliver udviklet på funktionaliteterne løbende og som behovet opstår.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="kald.html" class="btn btn-neutral float-left" title="Generelle kommandokald i linjen" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, Asger Sigurd Skovbo Petersen, Björn Harrtell, Kristian Evers

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>